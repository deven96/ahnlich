"use strict";(self.webpackChunkahnlich_web=self.webpackChunkahnlich_web||[]).push([[2870],{28453:(n,e,i)=>{i.d(e,{R:()=>t,x:()=>l});var r=i(96540);const s={},c=r.createContext(s);function t(n){const e=r.useContext(c);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:t(n.components),r.createElement(c.Provider,{value:e},n.children)}},39048:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"components/distributed-tracing/ahnlich-db","title":"Tracing in Ahnlich DB","description":"Why would you want to trace?","source":"@site/docs/components/distributed-tracing/ahnlich-db.md","sourceDirName":"components/distributed-tracing","slug":"/components/distributed-tracing/ahnlich-db","permalink":"/docs/components/distributed-tracing/ahnlich-db","draft":false,"unlisted":false,"editUrl":"https://github.com/deven96/ahnlich/tree/main/web/ahnlich-web/docs/components/distributed-tracing/ahnlich-db.md","tags":[],"version":"current","frontMatter":{"title":"Tracing in Ahnlich DB"},"sidebar":"docsSidebar","previous":{"title":"\ud83d\udd78\ufe0f Distributed Tracing","permalink":"/docs/components/distributed-tracing/"},"next":{"title":"Tracing in Ahnlich AI","permalink":"/docs/components/distributed-tracing/ahnlich-ai"}}');var s=i(74848),c=i(28453);const t={title:"Tracing in Ahnlich DB"},l="Tracing in Ahnlich DB",d={},o=[{value:"Why would you want to trace?",id:"why-would-you-want-to-trace",level:3},{value:"How we support distributed tracing",id:"how-we-support-distributed-tracing",level:3},{value:"Example docker-compose.yaml",id:"example-docker-composeyaml",level:3},{value:"Viewing DB Traces in Jaeger",id:"viewing-db-traces-in-jaeger",level:2}];function a(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"tracing-in-ahnlich-db",children:"Tracing in Ahnlich DB"})}),"\n",(0,s.jsx)(e.h3,{id:"why-would-you-want-to-trace",children:"Why would you want to trace?"}),"\n",(0,s.jsx)(e.p,{children:"With DB tracing, you can:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["See ",(0,s.jsx)(e.strong,{children:"latency"})," of operations like ",(0,s.jsx)(e.code,{children:"SET"}),", ",(0,s.jsx)(e.code,{children:"GETPRED"}),", ",(0,s.jsx)(e.code,{children:"DROPSTORE"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["Debug issues in ",(0,s.jsx)(e.strong,{children:"index updates"})," and ",(0,s.jsx)(e.strong,{children:"store lifecycle events"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Verify persistence operations and background tasks."}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Observe how the DB behaves when called by AI for predicate filtering."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"how-we-support-distributed-tracing",children:"How we support distributed tracing"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["Enable tracing: ",(0,s.jsx)(e.code,{children:"--enable-tracing"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["Configure endpoint: ",(0,s.jsx)(e.code,{children:"--otel-endpoint http://jaeger:4317."})]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["Each DB action generates ",(0,s.jsx)(e.strong,{children:"spans"})," with metadata (execution time, error info, input sizes)."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"example-docker-composeyaml",children:"Example docker-compose.yaml"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'ahnlich_db:\n  image: ghcr.io/deven96/ahnlich-db:latest\n  command: >\n    "ahnlich-db run --host 0.0.0.0 \\\n    --enable-tracing \\\n    --otel-endpoint http://jaeger:4317"\n  ports:\n    - "1369:1369"\n'})}),"\n",(0,s.jsx)(e.h2,{id:"viewing-db-traces-in-jaeger",children:"Viewing DB Traces in Jaeger"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["Open ",(0,s.jsx)(e.a,{href:"http://localhost:16686",children:"http://localhost:16686"})," in your browser."]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["Select ",(0,s.jsx)(e.code,{children:"service = ahnlich_db"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["Click ",(0,s.jsx)(e.strong,{children:"Find Traces"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["You\u2019ll see entries for DB actions (e.g., ",(0,s.jsx)(e.code,{children:"CREATESTORE"}),", ",(0,s.jsx)(e.code,{children:"GETPRED"}),")."]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Click a trace \u2192 expand spans to view details such as:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Query time"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Predicate filtering logic"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Errors or warnings"}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(a,{...n})}):a(n)}}}]);