"use strict";(self.webpackChunkahnlich_web=self.webpackChunkahnlich_web||[]).push([[268],{16539:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"troubleshooting/common-issues","title":"Common Issues","description":"This guide covers the most common issues users encounter and how to resolve them.","source":"@site/docs/troubleshooting/common-issues.md","sourceDirName":"troubleshooting","slug":"/troubleshooting/common-issues","permalink":"/docs/troubleshooting/common-issues","draft":false,"unlisted":false,"editUrl":"https://github.com/deven96/ahnlich/tree/main/web/ahnlich-web/docs/troubleshooting/common-issues.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"title":"Common Issues","sidebar_position":10},"sidebar":"docsSidebar","previous":{"title":"Configuration Reference","permalink":"/docs/reference/configuration"},"next":{"title":"\ud83c\udfdb\ufe0f Architecture","permalink":"/docs/architecture"}}');var i=s(74848),l=s(28453);const t={title:"Common Issues",sidebar_position:10},c="Troubleshooting Common Issues",o={},d=[{value:"Memory and Performance Issues",id:"memory-and-performance-issues",level:2},{value:"Out of Memory Errors",id:"out-of-memory-errors",level:3},{value:"Slow Query Performance",id:"slow-query-performance",level:3},{value:"Connection Issues",id:"connection-issues",level:2},{value:"Cannot Connect to Server",id:"cannot-connect-to-server",level:3},{value:"Maximum Clients Reached",id:"maximum-clients-reached",level:3},{value:"AI Proxy Cannot Connect to Database",id:"ai-proxy-cannot-connect-to-database",level:3},{value:"Data and Store Issues",id:"data-and-store-issues",level:2},{value:"Store Not Found",id:"store-not-found",level:3},{value:"Dimension Mismatch Errors",id:"dimension-mismatch-errors",level:3},{value:"Predicate Not Found",id:"predicate-not-found",level:3},{value:"Model and AI Issues",id:"model-and-ai-issues",level:2},{value:"Model Not Loading",id:"model-not-loading",level:3},{value:"Token Limit Exceeded",id:"token-limit-exceeded",level:3},{value:"Image Dimension Errors",id:"image-dimension-errors",level:3},{value:"Persistence Issues",id:"persistence-issues",level:2},{value:"Persistence File Won&#39;t Load",id:"persistence-file-wont-load",level:3},{value:"Data Lost After Restart",id:"data-lost-after-restart",level:3},{value:"Debugging Tips",id:"debugging-tips",level:2},{value:"Enable Detailed Logging",id:"enable-detailed-logging",level:3},{value:"Enable Distributed Tracing",id:"enable-distributed-tracing",level:3},{value:"Use CLI for Testing",id:"use-cli-for-testing",level:3},{value:"Check Server Health",id:"check-server-health",level:3},{value:"Getting More Help",id:"getting-more-help",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"troubleshooting-common-issues",children:"Troubleshooting Common Issues"})}),"\n",(0,i.jsx)(n.p,{children:"This guide covers the most common issues users encounter and how to resolve them."}),"\n",(0,i.jsx)(n.h2,{id:"memory-and-performance-issues",children:"Memory and Performance Issues"}),"\n",(0,i.jsx)(n.h3,{id:"out-of-memory-errors",children:"Out of Memory Errors"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"allocation error: CapacityOverflow\nServer crashes unexpectedly\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Causes:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Hitting the ",(0,i.jsx)(n.code,{children:"--allocator-size"})," limit"]}),"\n",(0,i.jsx)(n.li,{children:"Large batch operations"}),"\n",(0,i.jsx)(n.li,{children:"Image processing without streaming enabled"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Increase allocator size:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ahnlich-db run --allocator-size 21474836480  # 20 GiB (default is 10 GiB)\nahnlich-ai run --allocator-size 21474836480\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Enable streaming for images (AI proxy):"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ahnlich-ai run --enable-streaming  # 10x less memory, 40% slower\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Reduce batch sizes:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Instead of:\nlarge_batch = [entry1, entry2, ..., entry1000]\nclient.set(Set(store="my_store", inputs=large_batch))\n\n# Do this:\nbatch_size = 100\nfor i in range(0, len(large_batch), batch_size):\n    batch = large_batch[i:i+batch_size]\n    client.set(Set(store="my_store", inputs=batch))\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Monitor memory usage:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check process memory\nps aux | grep ahnlich\n\n# Monitor with top\ntop -p $(pgrep ahnlich)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"slow-query-performance",children:"Slow Query Performance"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Queries taking longer than expected"}),"\n",(0,i.jsx)(n.li,{children:"High CPU usage"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Diagnostic Steps:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Enable tracing to identify bottlenecks:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ahnlich-db run --enable-tracing --otel-endpoint http://localhost:4317\n"})}),"\n",(0,i.jsxs)(n.p,{children:["View traces in Jaeger UI at ",(0,i.jsx)(n.code,{children:"http://localhost:16686"})]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Check store size:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"INFOSERVER\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Verify algorithm choice:"})}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Linear algorithms (Cosine, Euclidean, DotProduct) scale linearly with data size"}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"KDTree"})," for faster searches with large datasets:"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"CREATESTORE my_store DIMENSION 128 NONLINEARALGORITHMINDEX (KDTree)\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Use predicate indices for filtering:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# Index frequently filtered fields\nCREATEPREDINDEX my_store PREDICATES (category, author)\n\n# Then filter efficiently\nGETPRED 10 IN my_store WHERE (category = science)\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Optimize batch operations:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Batch SET operations\nentries = [entry1, entry2, ..., entry100]\nclient.set(Set(store="my_store", inputs=entries))\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Use appropriate similarity algorithm:"})}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"CosineSimilarity"}),": Best for normalized vectors, direction-based similarity"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"EuclideanDistance"}),": Best for absolute distance measures"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"DotProduct"}),": Fast when vectors are pre-normalized"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"KDTree"}),": Best for high-dimensional spatial searches"]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Adjust thread pool size:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ahnlich-db run --threadpool-size 32  # Default: 16\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"connection-issues",children:"Connection Issues"}),"\n",(0,i.jsx)(n.h3,{id:"cannot-connect-to-server",children:"Cannot Connect to Server"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"connection refused\nFailed to dial server\nTransport issues with tonic\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Diagnostic Steps:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Check if server is running:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check DB\ncurl http://localhost:1369  # or use telnet\nps aux | grep ahnlich-db\n\n# Check AI\ncurl http://localhost:1370\nps aux | grep ahnlich-ai\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Verify port availability:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check if port is in use\nlsof -i :1369\nlsof -i :1370\n\n# Or with netstat\nnetstat -tuln | grep 1369\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Check firewall rules:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Ubuntu/Debian\nsudo ufw status\nsudo ufw allow 1369\nsudo ufw allow 1370\n\n# CentOS/RHEL\nsudo firewall-cmd --list-all\nsudo firewall-cmd --add-port=1369/tcp --permanent\nsudo firewall-cmd --reload\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Start server on all interfaces:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Allow connections from any IP\nahnlich-db run --host 0.0.0.0 --port 1369\nahnlich-ai run --host 0.0.0.0 --port 1370\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Check host/port configuration:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Correct\nclient = DbClient("http://127.0.0.1:1369")\n\n# Wrong - missing protocol\nclient = DbClient("127.0.0.1:1369")  # Invalid URI error\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Verify network connectivity:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Test connectivity\nping <server-host>\ntelnet <server-host> 1369\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"maximum-clients-reached",children:"Maximum Clients Reached"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Max Connected Clients Reached\nConnection rejected\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cause:"})," Hit the ",(0,i.jsx)(n.code,{children:"--maximum-clients"})," limit (default: 1000)"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Increase client limit:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ahnlich-db run --maximum-clients 5000\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Check current connections:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"LISTCLIENTS\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Implement connection pooling:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Reuse connections instead of creating new ones\nclass ClientPool:\n    def __init__(self, uri, pool_size=10):\n        self.pool = [DbClient(uri) for _ in range(pool_size)]\n        self.index = 0\n    \n    def get_client(self):\n        client = self.pool[self.index]\n        self.index = (self.index + 1) % len(self.pool)\n        return client\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Close idle connections:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"async def cleanup():\n    await client.close()\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"ai-proxy-cannot-connect-to-database",children:"AI Proxy Cannot Connect to Database"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Proxy Errored with connection refused\nDatabaseClientError\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Diagnostic Steps:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Verify DB is running:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ps aux | grep ahnlich-db\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Check DB host/port:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# See what DB is listening on\nnetstat -tuln | grep 1369\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Start DB before AI:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Terminal 1\nahnlich-db run --port 1369\n\n# Terminal 2 (wait for DB to start)\nahnlich-ai run --db-host 127.0.0.1 --db-port 1369\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Verify connection settings:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# If DB is on different host\nahnlich-ai run --db-host 192.168.1.10 --db-port 1369\n\n# If DB uses non-default port\nahnlich-ai run --db-port 1400\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"For standalone mode (no DB):"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ahnlich-ai run --without-db\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Adjust connection pool:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ahnlich-ai run --db-client-pool-size 20  # Default: 10\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"data-and-store-issues",children:"Data and Store Issues"}),"\n",(0,i.jsx)(n.h3,{id:"store-not-found",children:"Store Not Found"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'Store "my_store" not found\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Diagnostic Steps:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"List all stores:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"LISTSTORES\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Check store name spelling:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'# Store names are case-sensitive\n"MyStore" \u2260 "mystore"\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Create the store:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# DB\nCREATESTORE my_store DIMENSION 128\n\n# AI\nCREATESTORE my_store QUERYMODEL all-minilm-l6-v2 INDEXMODEL all-minilm-l6-v2\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Check persistence loaded:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# If using persistence\nahnlich-db run \\\n  --enable-persistence \\\n  --persist-location /path/to/data.dat \\\n  --fail-on-startup-if-persist-load-fails true  # Fail loudly if load fails\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Verify correct server:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Make sure you\'re connecting to the right instance\nclient = DbClient("http://localhost:1369")  # Not a different instance\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"dimension-mismatch-errors",children:"Dimension Mismatch Errors"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Store dimension is [128], input dimension of [256] was specified\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cause:"})," Vector dimensions don't match store configuration."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Check store dimension:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"INFOSERVER\n# Look at store details\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"For AI stores, verify model dimensions:"})}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Model"}),(0,i.jsx)(n.th,{children:"Embedding Dimension"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"all-minilm-l6-v2"}),(0,i.jsx)(n.td,{children:"384"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"all-minilm-l12-v2"}),(0,i.jsx)(n.td,{children:"384"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"bge-base-en-v1.5"}),(0,i.jsx)(n.td,{children:"768"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"bge-large-en-v1.5"}),(0,i.jsx)(n.td,{children:"1024"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"resnet-50"}),(0,i.jsx)(n.td,{children:"2048"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"clip-vit-b32-*"}),(0,i.jsx)(n.td,{children:"512"})]})]})]}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Match query and index models:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Both must have same dimensions\nCreateStore(\n    store="my_store",\n    query_model=AiModel.BGE_BASE_EN_V15,  # 768-dim\n    index_model=AiModel.BGE_BASE_EN_V15,  # 768-dim (same)\n)\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Recreate store with correct dimension:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"DROPSTORE my_store IFTRUE\nCREATESTORE my_store DIMENSION 768\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"predicate-not-found",children:"Predicate Not Found"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'Predicate "author" not found in store\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cause:"})," Querying by a predicate that wasn't indexed."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Create predicate index:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"CREATEPREDINDEX my_store PREDICATES (author, category)\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Or include when creating store:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"CREATESTORE my_store DIMENSION 128 PREDICATES (author, category)\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Verify predicates exist:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"INFOSERVER\n# Check store predicates\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"model-and-ai-issues",children:"Model and AI Issues"}),"\n",(0,i.jsx)(n.h3,{id:"model-not-loading",children:"Model Not Loading"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"index_model or query_model not selected or loaded\nError initializing a model thread\nTokenizer for model failed to load\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Diagnostic Steps:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Check supported models:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ahnlich-ai run --supported-models all-minilm-l6-v2,resnet-50\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Verify model cache:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Default location\nls -la ~/.ahnlich/models\n\n# Custom location\nahnlich-ai run --model-cache-location /path/to/models\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Check disk space:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"df -h ~/.ahnlich/models\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Test network connectivity:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Models download from HuggingFace\ncurl https://huggingface.co\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Wait for initial download:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# First time loading a model downloads from HuggingFace\n# This can take several minutes depending on model size\n# Watch logs for progress\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Clear corrupted cache:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"rm -rf ~/.ahnlich/models/model_name\n# Restart server to re-download\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Increase idle time:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Keep models loaded longer\nahnlich-ai run --ai-model-idle-time 600  # 10 minutes (default: 5 min)\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Pre-download models:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Download models before starting server\npython -c \"from transformers import AutoModel; AutoModel.from_pretrained('sentence-transformers/all-MiniLM-L6-v2')\"\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"token-limit-exceeded",children:"Token Limit Exceeded"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Max Token Exceeded. Model Expects [256], input type was [512]\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cause:"})," Text input exceeds model's token limit."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Token Limits:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"all-minilm-*: 256 tokens"}),"\n",(0,i.jsx)(n.li,{children:"bge-*: 512 tokens"}),"\n",(0,i.jsx)(n.li,{children:"clip-vit-b32-text: 77 tokens"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Truncate text:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"def truncate_text(text, max_length=200):\n    words = text.split()\n    return ' '.join(words[:max_length])\n\ntext = truncate_text(long_text)\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Split into chunks:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"def chunk_text(text, chunk_size=200):\n    words = text.split()\n    return [' '.join(words[i:i+chunk_size]) \n            for i in range(0, len(words), chunk_size)]\n\nchunks = chunk_text(long_document)\nfor chunk in chunks:\n    client.set(Set(store=\"docs\", inputs=[...]))\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Use model with larger limit:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Switch from AllMiniLM (256) to BGE (512)\nCreateStore(\n    store="my_store",\n    query_model=AiModel.BGE_BASE_EN_V15,  # 512 tokens\n    index_model=AiModel.BGE_BASE_EN_V15,\n)\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"image-dimension-errors",children:"Image Dimension Errors"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Image Dimensions [(512, 512)] does not match expected [(224, 224)]\nImage can't have zero dimension\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cause:"})," Images not matching model requirements (224x224 pixels)."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Resize images:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from PIL import Image\n\ndef prepare_image(image_path):\n    img = Image.open(image_path)\n    img = img.resize((224, 224))\n    return img.tobytes()\n\nimage_bytes = prepare_image("photo.jpg")\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Use model preprocessing:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'Set(\n    store="my_store",\n    inputs=[...],\n    preprocess_action=PreprocessAction.ModelPreprocessing,  # Auto-resize\n)\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Validate images before sending:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'def validate_image(image_bytes):\n    img = Image.open(io.BytesIO(image_bytes))\n    if img.width == 0 or img.height == 0:\n        raise ValueError("Invalid image dimensions")\n    return img\n\nimg = validate_image(image_bytes)\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"persistence-issues",children:"Persistence Issues"}),"\n",(0,i.jsx)(n.h3,{id:"persistence-file-wont-load",children:"Persistence File Won't Load"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Failed to load persistence file\nCorruption detected\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Diagnostic Steps:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Check file permissions:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ls -l /path/to/persistence.dat\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Verify file size vs allocator:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# File size\ndu -h persistence.dat\n\n# Allocator must be >2x file size\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Increase allocator size:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# If persistence file is 5 GB, use at least 10 GB allocator\nahnlich-db run \\\n  --enable-persistence \\\n  --persist-location /path/to/data.dat \\\n  --allocator-size 10737418240  # 10 GB\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Skip corrupted persistence:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ahnlich-db run \\\n  --enable-persistence \\\n  --persist-location /path/to/data.dat \\\n  --fail-on-startup-if-persist-load-fails false  # Continue without persistence\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Backup and delete:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Backup\ncp persistence.dat persistence.dat.backup\n\n# Start fresh\nrm persistence.dat\nahnlich-db run --enable-persistence --persist-location persistence.dat\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Check disk space:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"df -h /path/to/persistence/\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"data-lost-after-restart",children:"Data Lost After Restart"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cause:"})," Persistence not enabled."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,i.jsx)(n.p,{children:"Enable persistence when starting server:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ahnlich-db run \\\n  --enable-persistence \\\n  --persist-location /var/lib/ahnlich/db.dat \\\n  --persistence-interval 300000  # 5 minutes\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"debugging-tips",children:"Debugging Tips"}),"\n",(0,i.jsx)(n.h3,{id:"enable-detailed-logging",children:"Enable Detailed Logging"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Set log level\nahnlich-db run --log-level debug\n\n# Or specific modules\nahnlich-db run --log-level "info,ahnlich_db=debug,hf_hub=warn"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"enable-distributed-tracing",children:"Enable Distributed Tracing"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Start Jaeger\ndocker run -d \\\n  -p 16686:16686 \\\n  -p 4317:4317 \\\n  jaegertracing/all-in-one:latest\n\n# Start server with tracing\nahnlich-db run \\\n  --enable-tracing \\\n  --otel-endpoint http://localhost:4317\n\n# View traces at http://localhost:16686\n"})}),"\n",(0,i.jsx)(n.h3,{id:"use-cli-for-testing",children:"Use CLI for Testing"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Interactive mode\nahnlich --agent DB --host 127.0.0.1 --port 1369\n\n# Test commands\nPING\nINFOSERVER\nLISTSTORES\n"})}),"\n",(0,i.jsx)(n.h3,{id:"check-server-health",children:"Check Server Health"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Process status\nps aux | grep ahnlich\n\n# Resource usage\ntop -p $(pgrep ahnlich)\n\n# Network connections\nnetstat -anp | grep ahnlich\n\n# Open files\nlsof -p $(pgrep ahnlich)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"getting-more-help",children:"Getting More Help"}),"\n",(0,i.jsx)(n.p,{children:"Still having issues? Try these resources:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Check Error Codes"}),": ",(0,i.jsx)(n.a,{href:"/reference/error-codes",children:"Error Codes Reference"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Read Configuration Docs"}),": ",(0,i.jsx)(n.a,{href:"/reference/configuration",children:"Configuration Reference"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Enable Tracing"}),": See detailed request flow"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Community"}),": ",(0,i.jsx)(n.a,{href:"https://chat.whatsapp.com/E4CP7VZ1lNH9dJUxpsZVvD",children:"WhatsApp Group"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"GitHub"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/deven96/ahnlich/issues",children:"Report Issues"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"When reporting issues, include:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Error messages (full text)"}),"\n",(0,i.jsx)(n.li,{children:"Server version"}),"\n",(0,i.jsx)(n.li,{children:"Configuration flags used"}),"\n",(0,i.jsx)(n.li,{children:"Steps to reproduce"}),"\n",(0,i.jsxs)(n.li,{children:["Server logs (with ",(0,i.jsx)(n.code,{children:"--log-level debug"}),")"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>c});var r=s(96540);const i={},l=r.createContext(i);function t(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);