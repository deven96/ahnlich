"use strict";(self.webpackChunkahnlich_web=self.webpackChunkahnlich_web||[]).push([[591],{28453:(n,e,i)=>{i.d(e,{R:()=>l,x:()=>t});var s=i(96540);const r={},c=s.createContext(r);function l(n){const e=s.useContext(c);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),s.createElement(c.Provider,{value:e},n.children)}},50892:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"components/distributed-tracing/ahnlich-ai","title":"Tracing in Ahnlich AI","description":"Why would you want to trace?","source":"@site/docs/components/distributed-tracing/ahnlich-ai.md","sourceDirName":"components/distributed-tracing","slug":"/components/distributed-tracing/ahnlich-ai","permalink":"/docs/components/distributed-tracing/ahnlich-ai","draft":false,"unlisted":false,"editUrl":"https://github.com/deven96/ahnlich/tree/main/web/ahnlich-web/docs/components/distributed-tracing/ahnlich-ai.md","tags":[],"version":"current","frontMatter":{"title":"Tracing in Ahnlich AI"},"sidebar":"docsSidebar","previous":{"title":"Tracing in Ahnlich DB","permalink":"/docs/components/distributed-tracing/ahnlich-db"},"next":{"title":"Using Jaeger","permalink":"/docs/components/distributed-tracing/using-jaeger"}}');var r=i(74848),c=i(28453);const l={title:"Tracing in Ahnlich AI"},t="Tracing in Ahnlich AI",d={},a=[{value:"Why would you want to trace?",id:"why-would-you-want-to-trace",level:3},{value:"How we support distributed tracing",id:"how-we-support-distributed-tracing",level:3},{value:"Example docker-compose.yaml",id:"example-docker-composeyaml",level:3},{value:"Viewing AI Traces in Jaeger",id:"viewing-ai-traces-in-jaeger",level:2}];function o(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"tracing-in-ahnlich-ai",children:"Tracing in Ahnlich AI"})}),"\n",(0,r.jsx)(e.h3,{id:"why-would-you-want-to-trace",children:"Why would you want to trace?"}),"\n",(0,r.jsx)(e.p,{children:"With AI tracing, you can:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Measure ",(0,r.jsx)(e.strong,{children:"embedding computation"})," times for different models (e.g., ",(0,r.jsx)(e.code,{children:"resnet-50"})," vs ",(0,r.jsx)(e.code,{children:"all-MiniLM"}),")."]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Track full ",(0,r.jsx)(e.strong,{children:"similarity searches"})," (",(0,r.jsx)(e.code,{children:"GETSIMN"}),") including preprocessing and DB lookups."]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Debug performance issues with ",(0,r.jsx)(e.strong,{children:"execution providers"})," or ",(0,r.jsx)(e.strong,{children:"index algorithms"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Correlate AI spans with DB spans for full pipeline visibility."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"how-we-support-distributed-tracing",children:"How we support distributed tracing"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Enable tracing: ",(0,r.jsx)(e.code,{children:"--enable-tracing"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Forward spans: ",(0,r.jsx)(e.code,{children:"--otel-endpoint http://jaeger:4317"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Each AI action generates spans for:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Preprocessing"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Embedding generation"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Similarity algorithms"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Downstream DB calls"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"example-docker-composeyaml",children:"Example docker-compose.yaml"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'ahnlich_ai:\n  image: ghcr.io/deven96/ahnlich-ai:latest\n  command: >\n    "ahnlich-ai run --db-host ahnlich_db --host 0.0.0.0 \\\n    --supported-models all-minilm-l6-v2,resnet-50 \\\n    --enable-tracing \\\n    --otel-endpoint http://jaeger:4317"\n  ports:\n    - "1370:1370"\n'})}),"\n",(0,r.jsx)(e.h2,{id:"viewing-ai-traces-in-jaeger",children:"Viewing AI Traces in Jaeger"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Open ",(0,r.jsx)(e.a,{href:"http://localhost:16686",children:"http://localhost:16686"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Select ",(0,r.jsx)(e.code,{children:"service = ahnlich_ai"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Click ",(0,r.jsx)(e.strong,{children:"Find Traces"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Example trace breakdown for ",(0,r.jsx)(e.code,{children:"GETSIMN"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Span 1: Request received by AI."}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Span 2: Preprocessing (",(0,r.jsx)(e.code,{children:"RawString \u2192 embedding input"}),")."]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Span 3: Embedding model execution (",(0,r.jsx)(e.code,{children:"resnet-50"}),")."]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Span 4: Similarity algorithm execution (",(0,r.jsx)(e.code,{children:"cosinesimilarity"}),")."]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Span 5: Predicate filtering in ",(0,r.jsx)(e.strong,{children:"Ahnlich DB"})," (cross-service span)."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["This gives you a ",(0,r.jsx)(e.strong,{children:"timeline view"})," of the query, where each bar represents time spent in different stages."]})]})}function h(n={}){const{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}}}]);