"use strict";(self.webpackChunkahnlich_web=self.webpackChunkahnlich_web||[]).push([[9614],{28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>t});var r=i(96540);const s={},d=r.createContext(s);function l(e){const n=r.useContext(d);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(d.Provider,{value:n},e.children)}},55542:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>a,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"components/ahnlich-ai/deep-dive","title":"Deeper Dive","description":"1. Commands via the AI Proxy","source":"@site/docs/components/ahnlich-ai/deep-dive.md","sourceDirName":"components/ahnlich-ai","slug":"/components/ahnlich-ai/deep-dive","permalink":"/docs/components/ahnlich-ai/deep-dive","draft":false,"unlisted":false,"editUrl":"https://github.com/deven96/ahnlich/tree/main/web/ahnlich-web/docs/components/ahnlich-ai/deep-dive.md","tags":[],"version":"current","frontMatter":{"title":"Deeper Dive"},"sidebar":"docsSidebar","previous":{"title":"Advanced","permalink":"/docs/components/ahnlich-ai/advanced"},"next":{"title":"\u267e\ufe0f Persistence In Ahnlich","permalink":"/docs/components/persistence-in-ahnlich/"}}');var s=i(74848),d=i(28453);const l={title:"Deeper Dive"},t="Deeper Dive",o={},c=[{value:"1. Commands via the AI Proxy",id:"1-commands-via-the-ai-proxy",level:2},{value:"Examples of Commands",id:"examples-of-commands",level:3},{value:"Ping the Server",id:"ping-the-server",level:4},{value:"Server Info",id:"server-info",level:4},{value:"List Stores",id:"list-stores",level:4},{value:"Create a Store with Models",id:"create-a-store-with-models",level:4},{value:"Insert Text into Store",id:"insert-text-into-store",level:4},{value:"Similarity Search with Natural Query",id:"similarity-search-with-natural-query",level:4},{value:"Query by Predicate",id:"query-by-predicate",level:4},{value:"Create Predicate Index",id:"create-predicate-index",level:4},{value:"Drop Predicate Index",id:"drop-predicate-index",level:4},{value:"Create Non-Linear Algorithm Index",id:"create-non-linear-algorithm-index",level:4},{value:"Drop Non-Linear Algorithm Index",id:"drop-non-linear-algorithm-index",level:4},{value:"Delete by Key",id:"delete-by-key",level:4},{value:"Drop Store",id:"drop-store",level:4},{value:"2. How Ahnlich AI Reuses and Interacts with Ahnlich DB",id:"2-how-ahnlich-ai-reuses-and-interacts-with-ahnlich-db",level:2},{value:"Example:",id:"example",level:3},{value:"3. Supported Modalities and Models",id:"3-supported-modalities-and-models",level:2},{value:"4. Advanced \u2013 Running on Non-CPU Devices",id:"4-advanced--running-on-non-cpu-devices",level:2},{value:"Supported Execution Providers",id:"supported-execution-providers",level:2},{value:"Example \u2013 Overriding Execution Provider",id:"example--overriding-execution-provider",level:2},{value:"Rust Example",id:"rust-example",level:3},{value:"Switching Providers",id:"switching-providers",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"deeper-dive",children:"Deeper Dive"})}),"\n",(0,s.jsx)(n.h2,{id:"1-commands-via-the-ai-proxy",children:"1. Commands via the AI Proxy"}),"\n",(0,s.jsx)(n.p,{children:"Ahnlich AI acts as a proxy service that abstracts away the complexity of generating embeddings. Instead of supplying raw vectors (as with Ahnlich DB), developers can submit natural inputs such as text, and the AI proxy will:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Generate embeddings using the configured model(s)."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Forward the transformed embeddings to Ahnlich DB for storage or similarity queries."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"examples-of-commands",children:"Examples of Commands"}),"\n",(0,s.jsx)(n.h4,{id:"ping-the-server",children:"Ping the Server"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"PING"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Verifies that the Ahnlich AI service is running."}),"\n",(0,s.jsx)(n.h4,{id:"server-info",children:"Server Info"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"INFO SERVER"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Retrieves information about the AI proxy (status, active models, connected DB)."}),"\n",(0,s.jsx)(n.h4,{id:"list-stores",children:"List Stores"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"LIST STORES"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Returns all stores managed through the AI proxy."}),"\n",(0,s.jsx)(n.h4,{id:"create-a-store-with-models",children:"Create a Store with Models"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"CREATESTORE my_store QUERYMODEL all-minilm-l6-v2 INDEXMODEL all-minilm-l6-v2"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["This creates a store named ",(0,s.jsx)(n.code,{children:"my_store"})," where:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"index_model"})," \u2192 generates embeddings for stored data."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"query_model"})," \u2192 generates embeddings for queries."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"insert-text-into-store",children:"Insert Text into Store"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:'SET doc1 "Renewable energy storage is key to sustainability." IN my_store'})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Raw text is automatically converted into embeddings before being sent to Ahnlich DB."}),"\n",(0,s.jsx)(n.h4,{id:"similarity-search-with-natural-query",children:"Similarity Search with Natural Query"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:'GETSIMN 3 WITH "solar battery systems" IN my_store'})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:['The AI proxy embeds the query "',(0,s.jsx)(n.code,{children:"solar battery systems"}),'", forwards it to Ahnlich DB, and retrieves the top 3 most similar entries.']}),"\n",(0,s.jsx)(n.h4,{id:"query-by-predicate",children:"Query by Predicate"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:'GET BY PREDICATE (category = "energy") IN my_store'})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Filters results using metadata conditions."}),"\n",(0,s.jsx)(n.h4,{id:"create-predicate-index",children:"Create Predicate Index"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"CREATEPREDICATEINDEX category IN my_store"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Optimizes queries based on the category field."}),"\n",(0,s.jsx)(n.h4,{id:"drop-predicate-index",children:"Drop Predicate Index"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"DROPPREDICATEINDEX category IN my_store"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Removes an existing predicate index."}),"\n",(0,s.jsx)(n.h4,{id:"create-non-linear-algorithm-index",children:"Create Non-Linear Algorithm Index"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"CREATENONLINEARALGORITHM INDEX kdtree IN my_store"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Enables advanced search indexing strategies (e.g., KD-Tree)."}),"\n",(0,s.jsx)(n.h4,{id:"drop-non-linear-algorithm-index",children:"Drop Non-Linear Algorithm Index"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"DROPNONLINEARALGORITHMINDEX kdtree IN my_store"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Removes a non-linear algorithm index."}),"\n",(0,s.jsx)(n.h4,{id:"delete-by-key",children:"Delete by Key"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"DELETEKEY doc1 IN my_store"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Deletes a specific entry (doc1) from the store."}),"\n",(0,s.jsx)(n.h4,{id:"drop-store",children:"Drop Store"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"DROPSTORE my_store"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Deletes the entire store and its data."}),"\n",(0,s.jsx)(n.h2,{id:"2-how-ahnlich-ai-reuses-and-interacts-with-ahnlich-db",children:"2. How Ahnlich AI Reuses and Interacts with Ahnlich DB"}),"\n",(0,s.jsx)(n.p,{children:"The interaction model is two-tiered:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Input Transformation"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'The AI proxy transforms raw input (e.g., "renewable energy") into a vector embedding using the configured model.'}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Store Linkage"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Each store is bound to an ",(0,s.jsx)(n.strong,{children:"index_model"})," (for embedding inserted data) and a ",(0,s.jsx)(n.strong,{children:"query_model"})," (for embedding search queries)."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"This enables dual-encoder setups where different models can be used for indexing vs. querying."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Delegation to Ahnlich DB"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"After embedding generation, commands are translated into their Ahnlich DB equivalents."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"example",children:"Example:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:'GETSIMN 3 WITH "renewable energy storage" IN article_store'})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u2192 The AI proxy embeds the query and calls DB:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"GETSIMN 3 WITH [0.23, 0.91, -0.44, ...] USING cosinesimilarity IN article_store"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"3-supported-modalities-and-models",children:"3. Supported Modalities and Models"}),"\n",(0,s.jsx)(n.p,{children:"Depending on your setup, Ahnlich AI supports different modalities of input:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Text"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Embeddings generated from models like ",(0,s.jsx)(n.code,{children:"all-minilm-l6-v2"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Optimized for semantic similarity, clustering, and NLP tasks."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Dual Encoders (if installed)"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Support for cases where different models handle queries vs. indexed data."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Useful in retrieval systems where query understanding and corpus representation require different embedding strategies."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Important: When creating a store, you must explicitly define both:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"CREATESTORE my_store QUERYMODEL all-minilm-l6-v2 INDEXMODEL all-minilm-l6-v2"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"4-advanced--running-on-non-cpu-devices",children:"4. Advanced \u2013 Running on Non-CPU Devices"}),"\n",(0,s.jsxs)(n.p,{children:["By default, ",(0,s.jsx)(n.strong,{children:"Ahnlich AI"})," runs on ",(0,s.jsx)(n.strong,{children:"CPU"})," for maximum portability."]}),"\n",(0,s.jsxs)(n.p,{children:["For production-scale or latency-sensitive workloads, it can leverage specialized ",(0,s.jsx)(n.strong,{children:"execution providers"})," to offload embedding generation onto accelerators such as GPUs or Apple\u2019s CoreML devices."]}),"\n",(0,s.jsx)(n.h2,{id:"supported-execution-providers",children:"Supported Execution Providers"}),"\n",(0,s.jsxs)(n.p,{children:["Ahnlich AI can leverage multiple execution backends for model inference. By default, models run on ",(0,s.jsx)(n.strong,{children:"CPU execution"})," unless otherwise specified."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Provider"}),(0,s.jsx)(n.th,{children:"Platform"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"CPU (Default)"})}),(0,s.jsx)(n.td,{children:"All platforms"}),(0,s.jsx)(n.td,{children:"Runs models on CPU by default. Portable and easy to deploy, but slower for large-scale or real-time queries."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"CUDA"})}),(0,s.jsx)(n.td,{children:"NVIDIA GPUs (Linux/Windows)"}),(0,s.jsxs)(n.td,{children:["Runs models on CUDA-enabled GPUs. Requires ",(0,s.jsx)(n.code,{children:">= CUDA v12"}),". You may also need: ",(0,s.jsx)(n.code,{children:"bash sudo apt install libcudnn9-dev-cuda-12"})," Best for batch queries or high-throughput NLP."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"TensorRT"})}),(0,s.jsx)(n.td,{children:"NVIDIA GPUs"}),(0,s.jsx)(n.td,{children:"NVIDIA\u2019s optimized inference runtime. Provides lower latency than CUDA alone, especially for large models."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"CoreML"})}),(0,s.jsx)(n.td,{children:"macOS / iOS (M1/M2)"}),(0,s.jsx)(n.td,{children:"Apple\u2019s ML framework for Apple Silicon.  Not advised for NLP models due to the high dimensionality of embeddings."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"DirectML"})}),(0,s.jsx)(n.td,{children:"Windows"}),(0,s.jsx)(n.td,{children:"Hardware-accelerated inference on Windows devices. Offers broad GPU compatibility."})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"example--overriding-execution-provider",children:"Example \u2013 Overriding Execution Provider"}),"\n",(0,s.jsxs)(n.p,{children:["By default, Ahnlich AI runs with ",(0,s.jsx)(n.code,{children:"CPUExecutionProvider"}),".\nYou can override this when starting the engine or running a query."]}),"\n",(0,s.jsx)(n.h3,{id:"rust-example",children:"Rust Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'create_store(\n    store="my_store",\n    index_model="all-minilm-l6-v2",\n    query_model="all-minilm-l6-v2",\n    execution_provider="CUDA" // Override default CPU provider\n)\n'})}),"\n",(0,s.jsx)(n.h2,{id:"switching-providers",children:"Switching Providers"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"CPU Execution (default)"}),": Portable and easy to deploy across environments."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"GPU / Accelerators"}),": Use CUDA, TensorRT, DirectML, or CoreML for higher throughput and lower latency."]}),"\n"]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);